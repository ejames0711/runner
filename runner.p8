pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
	plyr = {}
	plyr.spr=2
	plyr.timer=0
	plyr.x=20
	plyr.y=90
	
	sb = {}
	sb.spr=6
	sb.timer=0
	sb.x=90
	sb.y=90
	
 snowx={}
 snowy={}
 snowspd={}
 
 init_snow()
end

function _update()
	sb.x-=1
	
	anim_w_frames(plyr,1,4,3)
	anim_w_frames(sb,6,8,5)
	
	animate_snow()
end

function _draw()
	cls(1)
	map(0)
	snow()
	spr(plyr.spr,plyr.x,plyr.y)
	spr(sb.spr,sb.x,sb.y)
end
-->8
function init_snow()
	 for i=1,100 do
  add(snowx,flr(rnd(128)))
  add(snowy,flr(rnd(128)))
  add(snowspd,rnd(1.5)+0.5)
 end
end

function snow()
	for i=1,#snowx do
	 local scol=6
  
  if snowspd[i]<1 then
 	 scol=6
  elseif snowspd[i]<1.5 then
   scol=13
  end
  
  pset(snowx[i],snowy[i],scol)
 end
end

function animate_snow()
  for i=1,#snowy do
	  local sy=snowy[i]
	  sy=sy+snowspd[i]
	  if sy>128 then
	   sy=sy-128
	  end
	  snowy[i]=sy
  end
end
-->8
--helpers


function anim_w_frames(object,init_spr,max_spr,frames)
	if object.timer < frames then
		object.timer+=1
	else
		if object.spr<max_spr then
			object.spr+=1
		else
			object.spr=init_spr
		end
		object.timer=0
	end
end

__gfx__
00000000000000000000000000555500000000000000000000dddd0000dddd0000dddd00dd000ddd000000000000000000000000000000000000000000000000
0000000005555550005555000566665000555500000000000dd777d00d7777d00d7777d07ddddd77000000000000000000000000000000000000000000000000
007007005666666555666655566667655566665500000000dd77d77dd77d777dd777777d7777777700dddddd0dddddd0ddd00000000000000000000000000000
000770005666676556666765566667655666676500000000d7777d7dd7d7777dd777777d77777777dd777777d777777d777ddddd000000000000000000000000
000770005666676556666765566666655666676500000000d777777dd777777dd7d7777d7777777777777777777777777d777777000000000000000000000000
007007005666666556666665566666655666666500000000d777777ddd77777dd77d77dd777777777777dd777dd7777777d777dd000000000000000000000000
0000000066566655566666656656665556666665000000000d7777d00dd777d00d777dd077777777777d777777777d7777777777000000000000000000000000
00000000666506600556665066505660055666500000000000dddd0000dddd0000dddd007777777777d777777777777777777777000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0009090909090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
