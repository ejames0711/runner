pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
	plyr = {}
	plyr.spr=2
	plyr.timer=0
	plyr.x=20
	plyr.y=85
	
	map_x=0
	map_spd=2.5
	hill_x=0
	hill_spd=2
	mnt_x=0
	mnt_spd=1
	
	sb = {}
	sb.spr=6
	sb.timer=0
	sb.x=90
	sb.y=85
	
 snowx={}
 snowy={}
 snowspd={}
 
 init_snow()
end

function _update()
	sb.x-=1
	
	map_x-=map_spd
	if map_x<-127 then map_x=0 end
	hill_x-=hill_spd
	if hill_x<-127 then hill_x=0 end
	mnt_x-=mnt_spd
	if mnt_x<-127 then mnt_x=0 end
	
	anim_w_frames(plyr,1,4,3)
	anim_w_frames(sb,6,8,5)
	
	animate_snow()
end

function _draw()
	cls(1)
	map(68,0,mnt_x,5,16)
	map(68,0,mnt_x+128,5,16)
	map(50,0,hill_x,10,16)
	map(0,0,map_x)
	map(0,0,map_x+128)
	snow()
	spr(plyr.spr,plyr.x,plyr.y)
	spr(sb.spr,sb.x,sb.y)
end
-->8
function init_snow()
	 for i=1,100 do
  add(snowx,flr(rnd(128)))
  add(snowy,flr(rnd(128)))
  add(snowspd,rnd(1.5)+0.5)
 end
end

function snow()
	for i=1,#snowx do
	 local scol=6
  
  if snowspd[i]<1 then
 	 scol=6
  elseif snowspd[i]<1.5 then
   scol=13
  end
  
  pset(snowx[i],snowy[i],scol)
 end
end

function animate_snow()
  for i=1,#snowy do
	  local sy=snowy[i]
	  sy=sy+snowspd[i]
	  if sy>128 then
	   sy=sy-128
	  end
	  snowy[i]=sy
  end
end
-->8
--helpers


function anim_w_frames(object,init_spr,max_spr,frames)
	if object.timer < frames then
		object.timer+=1
	else
		if object.spr<max_spr then
			object.spr+=1
		else
			object.spr=init_spr
		end
		object.timer=0
	end
end

__gfx__
00000000000000000000000000555500000000000000000000cccc0000cccc0000cccc00cc77cccccccc77777777cccc777cccc777777ccc77777777dddddddd
0000000005555550005555000566665000555500000000000cd777c00c7777c00c7777c0cccccccccccccccccccccccccccccccc7777cccd77777677dddddddd
007007005666666555666655566667655566665500000000cd77d77cc77d777cc777777cccccccccccdccccccccccccdcccccdcccc7cccdd77777777dddddddd
000770005666676556666765566667655666676500000000c7777d7cc7d7777cc777777cccccccddddddcccccccdddddccccdddcccccdddd77666777dddddddd
000770005666676556666765566666655666676500000000c777777cc777777cc7d7777cddddddddddddddddddddddddddddddddccccdddd76677777dddddddd
007007005666666556666665566666655666666500000000c777777ccd77777cc77d77dcdddddddddddddddddddddddddddddddddddddddd77777777dddddddd
0000000066566655566666656656665556666665000000000c7777c00cd777c00c777dc0dddddddddddddddddddddddddddddddddddddddd77777677dddddddd
00000000666506600556665066505660055666500000000000cccc0000cccc0000cccc00dddddddddddddddddddddddddddddddddddddddd77777777dddddddd
0000000550000000000000066000000000000007700000000000000000000000000000007777777777777777dccc7cddddddc77d7767777777777777c7777777
0000005555000000000000666600000000000077770000000000000000000000000000007777677777777777ddc77cddddddc7cd7777777777777777c7777777
0000055555500000000006666660000000000777777000000000000000000000000000007777677777777777ddc7ccdddddddccd7777767777777777dc777777
0000555555550000000066666666000000007777777700000000000000000000000000007777777777777777dddccddddddddcdd7777777777777777ddcc7777
0005555555555000000666666666600000077777777770000000000000000000000000007777777777777777dddccddddddddddd7767777777777777dddc7777
0055555555555500006666666666660000777777777777000000000000000000000000007667777777777777ddddcddddddddddd76677777ccc777ccddddcccc
0555555555555550066666666666666007777777777777700000000000000000000000007677777777777777dddddddddddddddd77777767dddcccdddddddddd
5555555555555555666666666666666677777777777777770000000000000000000000007777777777777777dddddddddddddddd77777777dddddddddddddddd
55555555000000006666666600000000777777770000000000000000000000000000000077777777000000000000000000000000000000000000000000000000
55555555000000006666666600000000777777770000000000000000000000000000000077777777000000000000000000000000000000000000000000000000
555555550000000066666666000000007777777700000000000000000000000000000000777777cc000000000000000000000000000000000000000000000000
555555550000000066666666000000007777777700000000000000000000000000000000777777cd000000000000000000000000000000000000000000000000
5555555500000000666666660000000077777777000000000000000000000000000000007777ccdd000000000000000000000000000000000000000000000000
555555550000000066666666000000007777777700000000000000000000000000000000ccccdddd000000000000000000000000000000000000000000000000
555555550000000066666666000000007777777700000000000000000000000000000000dddddddd000000000000000000000000000000000000000000000000
555555550000000066666666000000007777777700000000000000000000000000000000dddddddd000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001415000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000142424150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000014150000000000000000000000000000000014242424241500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001424241500001415000000000000000000001222222222222213000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000102020202011102020110000000000000000122222222222222222130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010202020202020202020201100000000000012222222222222222222221300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001020202020202020202020202011000000001222222222222222222222222213000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000102020202020202020202020202020110000122222222222222222222222222222130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d1a1a1a1a1a1a1a1a1a1a0e1a1a191a1a1a1a1a191a1a1a1d1a1a1a1a1a1a1a1d1a1a1a1a1a1a1a1a1a1a0e1a1a191a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a0e1a1a1a1a1a1a1a1a1a1d1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a0e1a1a1a1a1a0e1a1a1a1a1a1a1a1a1a1d1a1a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a191a1a1a1a1a1a1a1a1a1a1d1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a191a1a1a1a1a1a1a1a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0d1f1e2909090c0c1f29090c0c090b090d1f290b09090c0d0c1f1e290a0a0d090d1f1e2909090c0c1f29090c0c090b090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0f0f0f0f0f0f0f0f0f0f0f1b0f0f0f0f0f0f0f0f0f0f0f1b0f0f0f0f1c0f0f0f0f0f0f0f0f0f0f0f0f0f0f1b0f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0f0f0f0f1b0f0f0f0f0f0f0f0f0f0f0f0f0f0f1c0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f1b0f0f0f0f0f0f0f0f0f0f0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
